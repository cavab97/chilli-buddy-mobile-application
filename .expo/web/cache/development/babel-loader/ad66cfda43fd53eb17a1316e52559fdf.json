{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\limwe\\\\Documents\\\\application\\\\gogogain-app\\\\gogogain-user\\\\src\\\\screens\\\\subscreen\\\\payment\\\\CameraReceipt\\\\index.js\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Actions } from \"react-native-router-flux\";\nimport { PaymentCameraReceipt } from \"../../../../components/templates\";\nimport { Camera } from 'expo-camera';\nimport * as Permissions from 'expo-permissions';\nimport styles from \"./styles\";\n\nvar index = function (_Component) {\n  _inherits(index, _Component);\n\n  var _super = _createSuper(index);\n\n  function index(props) {\n    var _this;\n\n    _classCallCheck(this, index);\n\n    _this = _super.call(this, props);\n\n    _this.handleCameraType = function () {\n      var cameraType = _this.state.cameraType;\n\n      _this.setState({\n        cameraType: cameraType === Camera.Constants.Type.back ? Camera.Constants.Type.front : Camera.Constants.Type.back\n      });\n    };\n\n    _this.takePicture = function _callee() {\n      var photo;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!_this.camera) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(_this.camera.takePictureAsync());\n\n            case 3:\n              photo = _context.sent;\n\n              _this.setState({\n                uri: photo.uri\n              });\n\n              Actions.SubmitReceipt({\n                uri: _this.state.uri\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.handleRef = function (ref) {\n      _this.camera = ref;\n    };\n\n    _this.state = {\n      hasPermission: null,\n      type: Camera.Constants.Type.back,\n      uri: null\n    };\n    return _this;\n  }\n\n  _createClass(index, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _await$Permissions$as, status;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n            case 2:\n              _await$Permissions$as = _context2.sent;\n              status = _await$Permissions$as.status;\n              this.setState({\n                hasPermission: status === 'granted'\n              });\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var hasPermission = this.state.hasPermission;\n      return React.createElement(PaymentCameraReceipt, {\n        hasPermission: hasPermission,\n        cameraType: this.state.cameraType,\n        cameraConfig: this.handleRef.bind(this),\n        onPress: this.takePicture.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }\n      });\n    }\n  }]);\n\n  return index;\n}(Component);\n\nexport default connect(null, {})(index);","map":{"version":3,"sources":["C:/Users/limwe/Documents/application/gogogain-app/gogogain-user/src/screens/subscreen/payment/CameraReceipt/index.js"],"names":["React","Component","connect","Actions","PaymentCameraReceipt","Camera","Permissions","styles","index","props","handleCameraType","cameraType","state","setState","Constants","Type","back","front","takePicture","camera","takePictureAsync","photo","uri","SubmitReceipt","handleRef","ref","hasPermission","type","askAsync","CAMERA","status","bind"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,0BAAxB;AACA,SAASC,oBAAT;AACA,SAASC,MAAT,QAAuB,aAAvB;AACA,OAAO,KAAKC,WAAZ,MAA6B,kBAA7B;AAEA,OAAOC,MAAP;;IAEMC,K;;;;;AACF,iBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,8BAAMA,KAAN;;AADe,UAkBnBC,gBAlBmB,GAkBA,YAAM;AAAA,UACbC,UADa,GACE,MAAKC,KADP,CACbD,UADa;;AAGrB,YAAKE,QAAL,CAAc;AAACF,QAAAA,UAAU,EACvBA,UAAU,KAAKN,MAAM,CAACS,SAAP,CAAiBC,IAAjB,CAAsBC,IAArC,GACEX,MAAM,CAACS,SAAP,CAAiBC,IAAjB,CAAsBE,KADxB,GAEEZ,MAAM,CAACS,SAAP,CAAiBC,IAAjB,CAAsBC;AAHZ,OAAd;AAKH,KA1BkB;;AAAA,UA4BnBE,WA5BmB,GA4BL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACN,MAAKC,MADC;AAAA;AAAA;AAAA;;AAAA;AAAA,+CAEU,MAAKA,MAAL,CAAYC,gBAAZ,EAFV;;AAAA;AAEJC,cAAAA,KAFI;;AAIR,oBAAKR,QAAL,CAAc;AAACS,gBAAAA,GAAG,EAAED,KAAK,CAACC;AAAZ,eAAd;;AACAnB,cAAAA,OAAO,CAACoB,aAAR,CAAsB;AAAED,gBAAAA,GAAG,EAAE,MAAKV,KAAL,CAAWU;AAAlB,eAAtB;;AALQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA5BK;;AAAA,UAqCnBE,SArCmB,GAqCP,UAACC,GAAD,EAAS;AACjB,YAAKN,MAAL,GAAcM,GAAd;AACH,KAvCkB;;AAEf,UAAKb,KAAL,GAAa;AACTc,MAAAA,aAAa,EAAE,IADN;AAETC,MAAAA,IAAI,EAAEtB,MAAM,CAACS,SAAP,CAAiBC,IAAjB,CAAsBC,IAFnB;AAGTM,MAAAA,GAAG,EAAE;AAHI,KAAb;AAFe;AAOlB;;;;;;;;;;;;+CAG4BhB,WAAW,CAACsB,QAAZ,CAAqBtB,WAAW,CAACuB,MAAjC,C;;;;AAAjBC,cAAAA,M,yBAAAA,M;AACR,mBAAKjB,QAAL,CAAc;AAAEa,gBAAAA,aAAa,EAAEI,MAAM,KAAK;AAA5B,eAAd;;;;;;;;;;;2CAGkB,CAErB;;;6BAyBQ;AAAA,UACGJ,aADH,GACqB,KAAKd,KAD1B,CACGc,aADH;AAGL,aACI,oBAAC,oBAAD;AACI,QAAA,aAAa,EAAEA,aADnB;AAEI,QAAA,UAAU,EAAE,KAAKd,KAAL,CAAWD,UAF3B;AAGI,QAAA,YAAY,EAAE,KAAKa,SAAL,CAAeO,IAAf,CAAoB,IAApB,CAHlB;AAII,QAAA,OAAO,EAAE,KAAKb,WAAL,CAAiBa,IAAjB,CAAsB,IAAtB,CAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAQH;;;;EArDe9B,S;;AAwDpB,eAAeC,OAAO,CAAC,IAAD,EAAO,EAAP,CAAP,CAAmBM,KAAnB,CAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Actions } from \"react-native-router-flux\";\r\nimport { PaymentCameraReceipt } from \"../../../../components/templates\";\r\nimport { Camera } from 'expo-camera';\r\nimport * as Permissions from 'expo-permissions';\r\n\r\nimport styles from \"./styles\";\r\n\r\nclass index extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            hasPermission: null,\r\n            type: Camera.Constants.Type.back,\r\n            uri: null\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const { status } = await Permissions.askAsync(Permissions.CAMERA);\r\n        this.setState({ hasPermission: status === 'granted' });\r\n    }\r\n\r\n    componentWillUnmount(){\r\n\r\n    }\r\n\r\n    handleCameraType = () => { \r\n        const { cameraType } = this.state\r\n    \r\n        this.setState({cameraType:\r\n          cameraType === Camera.Constants.Type.back\r\n          ? Camera.Constants.Type.front\r\n          : Camera.Constants.Type.back\r\n        })\r\n    }\r\n\r\n    takePicture = async () => {\r\n        if (this.camera) {\r\n          let photo = await this.camera.takePictureAsync();\r\n          //console.log(photo)\r\n          this.setState({uri: photo.uri});\r\n          Actions.SubmitReceipt({ uri: this.state.uri });\r\n        }\r\n    }\r\n\r\n    handleRef = (ref) => {\r\n        this.camera = ref\r\n    }\r\n\r\n    render() {\r\n        const { hasPermission } = this.state;\r\n\r\n        return (\r\n            <PaymentCameraReceipt\r\n                hasPermission={hasPermission}\r\n                cameraType={this.state.cameraType}\r\n                cameraConfig={this.handleRef.bind(this)}\r\n                onPress={this.takePicture.bind(this)}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(null, { })(index);\r\n"]},"metadata":{},"sourceType":"module"}