{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { database } from \"../../marslab-library-react-native/utils/helper\";\nvar objectGroupName = \"route\";\nvar userName = \"user\";\nvar objectName = \"routeTicket\";\nexport var GeoPoint = database.GeoPoint;\nexport function readObjects(_ref) {\n  var groupId = _ref.groupId;\n  return new Promise(function (resolve, reject) {\n    database.readTable({\n      ref: userName + \"Packaging0/\" + groupId + \"/\" + objectName + \"Packaging0\"\n    }).get().then(function (QuerySnapshot) {\n      var result = [];\n      QuerySnapshot.forEach(function (snapshot) {\n        var data = _objectSpread(_objectSpread(_objectSpread({}, snapshot.data()), snapshot.data().d), {}, {\n          id: snapshot.id\n        });\n\n        delete data[\"d\"];\n        var parent = database.processData({\n          data: data\n        });\n        var created = database.processData({\n          data: data.created\n        });\n        var deleted = database.processData({\n          data: data.deleted\n        });\n        var updated = database.processData({\n          data: data.updated\n        });\n        var completedMissions = data.completedMissions.map(function (data) {\n          return database.processData({\n            data: data\n          });\n        });\n\n        var processedData = _objectSpread(_objectSpread({}, parent), {}, {\n          created: created,\n          deleted: deleted,\n          updated: updated,\n          completedMissions: completedMissions\n        });\n\n        result.push(processedData);\n      });\n      resolve(result);\n    }).catch(function (error) {\n      reject(error);\n    });\n  });\n}\nexport function readObjectsByObjectGroup(_ref2) {\n  var groupId = _ref2.groupId;\n  return new Promise(function (resolve, reject) {\n    database.readTable({\n      ref: objectGroupName + \"Packaging0/\" + groupId + \"/\" + objectName + \"Packaging0\"\n    }).get().then(function (QuerySnapshot) {\n      var result = [];\n      QuerySnapshot.forEach(function (snapshot) {\n        var data = _objectSpread(_objectSpread(_objectSpread({}, snapshot.data()), snapshot.data().d), {}, {\n          id: snapshot.id\n        });\n\n        delete data[\"d\"];\n        var parent = database.processData({\n          data: data\n        });\n        var created = database.processData({\n          data: data.created\n        });\n        var deleted = database.processData({\n          data: data.deleted\n        });\n        var updated = database.processData({\n          data: data.updated\n        });\n        var completedMissions = data.completedMissions.map(function (data) {\n          return database.processData({\n            data: data\n          });\n        });\n\n        var processedData = _objectSpread(_objectSpread({}, parent), {}, {\n          created: created,\n          deleted: deleted,\n          updated: updated,\n          completedMissions: completedMissions\n        });\n\n        result.push(processedData);\n      });\n      resolve(result);\n    }).catch(function (error) {\n      reject(error);\n    });\n  });\n}\nexport function readObject(_ref3) {\n  var id = _ref3.id;\n  return new Promise(function (resolve, reject) {\n    database.readData({\n      ref: objectName + \"Private0/\" + id\n    }).then(function (snapshot) {\n      var data = _objectSpread(_objectSpread(_objectSpread({}, snapshot), snapshot.d), {}, {\n        id: snapshot.id\n      });\n\n      delete data[\"d\"];\n      var parent = database.processData({\n        data: data\n      });\n      var created = database.processData({\n        data: data.created\n      });\n      var deleted = database.processData({\n        data: data.deleted\n      });\n      var updated = database.processData({\n        data: data.updated\n      });\n      var completedMissions = data.completedMissions.map(function (data) {\n        return database.processData({\n          data: data\n        });\n      });\n\n      var processedData = _objectSpread(_objectSpread({}, parent), {}, {\n        created: created,\n        deleted: deleted,\n        updated: updated,\n        completedMissions: completedMissions\n      });\n\n      resolve(processedData);\n    }).catch(function (error) {\n      reject(error);\n    });\n  });\n}\n\nvar listener = function listener() {};\n\nexport function listenObjects(_ref4) {\n  var _ref4$groupId = _ref4.groupId,\n      groupId = _ref4$groupId === void 0 ? null : _ref4$groupId,\n      _ref4$updateListener = _ref4.updateListener,\n      updateListener = _ref4$updateListener === void 0 ? function () {} : _ref4$updateListener;\n  listener = database.readTable({\n    ref: userName + \"Packaging0/\" + groupId + \"/\" + objectName + \"Packaging0\"\n  }).onSnapshot(function (QuerySnapshot) {\n    var result = [];\n    QuerySnapshot.forEach(function (snapshot) {\n      var data = _objectSpread(_objectSpread(_objectSpread({}, snapshot.data()), snapshot.data().d), {}, {\n        id: snapshot.id\n      });\n\n      delete data[\"d\"];\n      var parent = database.processData({\n        data: data\n      });\n      var created = database.processData({\n        data: data.created\n      });\n      var deleted = database.processData({\n        data: data.deleted\n      });\n      var updated = database.processData({\n        data: data.updated\n      });\n      var completedMissions = data.completedMissions.map(function (data) {\n        return database.processData({\n          data: data\n        });\n      });\n\n      var processedData = _objectSpread(_objectSpread({}, parent), {}, {\n        created: created,\n        deleted: deleted,\n        updated: updated,\n        completedMissions: completedMissions\n      });\n\n      result.push(processedData);\n    });\n    updateListener(result);\n  });\n}\nexport function unlistenObjects() {\n  listener();\n}\n\nvar objectListener = function objectListener() {};\n\nexport function listenObject(_ref5) {\n  var _ref5$objectId = _ref5.objectId,\n      objectId = _ref5$objectId === void 0 ? null : _ref5$objectId,\n      _ref5$updateListener = _ref5.updateListener,\n      updateListener = _ref5$updateListener === void 0 ? function () {} : _ref5$updateListener;\n  objectListener = database.readRecord({\n    ref: objectName + \"Private0/\" + objectId\n  }).onSnapshot(function (snapshot) {\n    var data = _objectSpread(_objectSpread(_objectSpread({}, snapshot.data()), snapshot.data().d), {}, {\n      id: snapshot.id\n    });\n\n    delete data[\"d\"];\n    var parent = database.processData({\n      data: data\n    });\n    var created = database.processData({\n      data: data.created\n    });\n    var deleted = database.processData({\n      data: data.deleted\n    });\n    var updated = database.processData({\n      data: data.updated\n    });\n    var completedMissions = data.completedMissions.map(function (data) {\n      return database.processData({\n        data: data\n      });\n    });\n\n    var processedData = _objectSpread(_objectSpread({}, parent), {}, {\n      created: created,\n      deleted: deleted,\n      updated: updated,\n      completedMissions: completedMissions\n    });\n\n    updateListener(processedData);\n  });\n}\nexport function unlistenObject() {\n  objectListener();\n}","map":{"version":3,"sources":["C:/Gogogain/Gogogain - User/src/services/database/routeTicket.js"],"names":["database","objectGroupName","userName","objectName","GeoPoint","readObjects","groupId","Promise","resolve","reject","readTable","ref","get","then","QuerySnapshot","result","forEach","snapshot","data","d","id","parent","processData","created","deleted","updated","completedMissions","map","processedData","push","catch","error","readObjectsByObjectGroup","readObject","readData","listener","listenObjects","updateListener","onSnapshot","unlistenObjects","objectListener","listenObject","objectId","readRecord","unlistenObject"],"mappings":"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","sourcesContent":["import { database } from \"../../marslab-library-react-native/utils/helper\";\r\n\r\nconst objectGroupName = \"route\";\r\nconst userName = \"user\";\r\nconst objectName = \"routeTicket\";\r\n\r\nexport const GeoPoint = database.GeoPoint;\r\n\r\nexport function readObjects({groupId}) {\r\n  return new Promise((resolve, reject) => {\r\n    database\r\n      .readTable({ ref: `${userName}Packaging0/${groupId}/${objectName}Packaging0` })\r\n      .get()\r\n      .then(QuerySnapshot => {\r\n        const result = [];\r\n        QuerySnapshot.forEach(snapshot => {\r\n          const data = {\r\n            ...snapshot.data(),\r\n            ...snapshot.data().d,\r\n            id: snapshot.id\r\n          };\r\n          delete data[\"d\"];\r\n\r\n          const parent = database.processData({ data });\r\n          const created = database.processData({ data: data.created });\r\n          const deleted = database.processData({ data: data.deleted });\r\n          const updated = database.processData({ data: data.updated });\r\n          const completedMissions = data.completedMissions.map((data) => {\r\n            return database.processData({ data: data });\r\n          });\r\n\r\n          const processedData = { ...parent, created, deleted, updated, completedMissions };\r\n\r\n          result.push(processedData);\r\n        });\r\n        resolve(result);\r\n      })\r\n      .catch(error => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport function readObjectsByObjectGroup({groupId}) {\r\n  return new Promise((resolve, reject) => {\r\n    database\r\n      .readTable({ ref: `${objectGroupName}Packaging0/${groupId}/${objectName}Packaging0` })\r\n      .get()\r\n      .then(QuerySnapshot => {\r\n        const result = [];\r\n        QuerySnapshot.forEach(snapshot => {\r\n          const data = {\r\n            ...snapshot.data(),\r\n            ...snapshot.data().d,\r\n            id: snapshot.id\r\n          };\r\n          delete data[\"d\"];\r\n\r\n          const parent = database.processData({ data });\r\n          const created = database.processData({ data: data.created });\r\n          const deleted = database.processData({ data: data.deleted });\r\n          const updated = database.processData({ data: data.updated });\r\n          const completedMissions = data.completedMissions.map((data) => {\r\n            return database.processData({ data: data });\r\n          });\r\n\r\n          const processedData = { ...parent, created, deleted, updated, completedMissions };\r\n\r\n          result.push(processedData);\r\n        });\r\n        resolve(result);\r\n      })\r\n      .catch(error => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nexport function readObject({ id }) {\r\n  return new Promise((resolve, reject) => {\r\n    database\r\n      .readData({ ref: `${objectName}Private0/${id}` })\r\n      .then(snapshot => {\r\n\r\n        const data = {\r\n          ...snapshot,\r\n          ...snapshot.d,\r\n          id: snapshot.id\r\n        };\r\n\r\n        delete data[\"d\"];\r\n\r\n        const parent = database.processData({ data });\r\n        const created = database.processData({ data: data.created });\r\n        const deleted = database.processData({ data: data.deleted });\r\n        const updated = database.processData({ data: data.updated });\r\n        const completedMissions = data.completedMissions.map((data) => {\r\n          return database.processData({ data: data });\r\n        });\r\n\r\n        const processedData = { ...parent, created, deleted, updated, completedMissions };\r\n\r\n        resolve(processedData);\r\n      })\r\n      .catch(error => {\r\n        reject(error);\r\n      });\r\n  });\r\n}\r\n\r\nlet listener = () => {};\r\n\r\nexport function listenObjects({groupId = null, updateListener = () =>{} }) {\r\n  listener = database\r\n      .readTable({ ref: `${userName}Packaging0/${groupId}/${objectName}Packaging0` })\r\n      .onSnapshot(QuerySnapshot => {\r\n        const result = [];\r\n        QuerySnapshot.forEach(snapshot => {\r\n          const data = {\r\n            ...snapshot.data(),\r\n            ...snapshot.data().d,\r\n            id: snapshot.id\r\n          };\r\n          delete data[\"d\"];\r\n\r\n          const parent = database.processData({ data });\r\n          const created = database.processData({ data: data.created });\r\n          const deleted = database.processData({ data: data.deleted });\r\n          const updated = database.processData({ data: data.updated });\r\n          const completedMissions = data.completedMissions.map((data) => {\r\n            return database.processData({ data: data });\r\n          });\r\n\r\n          const processedData = { ...parent, created, deleted, updated, completedMissions };\r\n\r\n          result.push(processedData);\r\n        });\r\n        updateListener(result)\r\n      })\r\n}\r\n\r\nexport function unlistenObjects() {\r\n  listener();\r\n}\r\n\r\nlet objectListener = () => {};\r\n\r\nexport function listenObject({ objectId = null, updateListener = () => {} }) {\r\n  objectListener = database\r\n    .readRecord({ ref: `${objectName}Private0/${objectId}` })\r\n    .onSnapshot((snapshot) => {\r\n      const data = {\r\n        ...snapshot.data(),\r\n        ...snapshot.data().d,\r\n        id: snapshot.id,\r\n      };\r\n      delete data[\"d\"];\r\n\r\n      const parent = database.processData({ data });\r\n      const created = database.processData({ data: data.created });\r\n      const deleted = database.processData({ data: data.deleted });\r\n      const updated = database.processData({ data: data.updated });\r\n      const completedMissions = data.completedMissions.map((data) => {\r\n        return database.processData({ data: data });\r\n      });\r\n\r\n      const processedData = { ...parent, created, deleted, updated, completedMissions };\r\n\r\n      updateListener(processedData);\r\n    });\r\n}\r\n\r\nexport function unlistenObject() {\r\n  objectListener();\r\n}"]},"metadata":{},"sourceType":"module"}